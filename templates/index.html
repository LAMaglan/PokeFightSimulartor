<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>Pokemon Battle</title>
</head>

<body>
    <h1>Pokemon Battle</h1>

    <form id="battleForm" action="/battle" method="get">
        <label for="pokemon1_name">Pokemon 1:</label><br>
        <input list="pokemon_list1" type="text" id="pokemon1_name" name="pokemon1_name">
        <datalist id="pokemon_list1"></datalist>
        <button type="button" onclick="redirectToStats('pokemon1_name')">View Stats</button><br>

        <label for="pokemon2_name">Pokemon 2:</label><br>
        <input list="pokemon_list2" type="text" id="pokemon2_name" name="pokemon2_name">
        <datalist id="pokemon_list2"></datalist>
        <button type="button" onclick="redirectToStats('pokemon2_name')">View Stats</button><br><br>

        <input type="submit" value="Battle!">
    </form>

    <script>
        function redirectToStats(inputId) {
            var pokemonName = document.getElementById(inputId).value;
            if (pokemonName) {
                window.location.href = '/pokemon/' + pokemonName;
            } else {
                alert('Please enter a Pokemon name.');
            }
        }

        // Fetch the pokemon names and populate the datalists
        fetch('/pokemon_names')
            .then(response => response.json())
            .then(data => {
                const list1 = document.getElementById('pokemon_list1');
                const list2 = document.getElementById('pokemon_list2');
                data.forEach(name => {
                    const option1 = document.createElement('option');
                    option1.value = name;
                    const option2 = document.createElement('option');
                    option2.value = name;
                    list1.appendChild(option1);
                    list2.appendChild(option2);
                });
            });
    </script>

</body>

</html>